<%- include('../layouts/header', { appName, scripts }) %>

  <h1>Admin Dashboard</h1>

  <div class="card-grid">
    <div class="card">
      <h3>Application</h3>
      <table>
        <tr><td>Name</td><td><%= appName %></td></tr>
        <tr><td>Version</td><td><%= appVersion %></td></tr>
        <tr><td>API Version</td><td><%= apiVersion ?? 'Unavailable' %></td></tr>
        <tr><td>Framework</td><td><%= frameworkVersion %></td></tr>
        <tr><td>API Framework</td><td><%= apiFrameworkVersion ?? 'Unavailable' %></td></tr>
      </table>
    </div>

    <div class="card">
      <h3>Runtime</h3>
      <table>
        <thead><tr><th>Process</th><th>Node.js</th><th>Uptime</th></tr></thead>
        <tbody>
          <tr>
            <td>App</td>
            <td><%= appRuntime.nodeVersion %></td>
            <td><%= appRuntime.uptime %></td>
          </tr>
          <tr>
            <td>API</td>
            <% if (apiRuntime) { %>
              <td><%= apiRuntime.nodeVersion %></td>
              <td><%= apiRuntime.uptime %></td>
            <% } else { %>
              <td colspan="2">Unavailable</td>
            <% } %>
          </tr>
        </tbody>
      </table>
    </div>

    <div class="card">
      <h3>Memory Usage</h3>
      <table>
        <thead><tr><th>Process</th><th>RSS</th><th>Heap Used</th><th>Heap Total</th></tr></thead>
        <tbody>
          <tr>
            <td>App</td>
            <td><%= (appMemoryUsage.rss / 1024 / 1024).toFixed(2) %> MB</td>
            <td><%= (appMemoryUsage.heapUsed / 1024 / 1024).toFixed(2) %> MB</td>
            <td><%= (appMemoryUsage.heapTotal / 1024 / 1024).toFixed(2) %> MB</td>
          </tr>
          <tr>
            <td>API</td>
            <% if (apiMemoryUsage) { %>
              <td><%= (apiMemoryUsage.rss / 1024 / 1024).toFixed(2) %> MB</td>
              <td><%= (apiMemoryUsage.heapUsed / 1024 / 1024).toFixed(2) %> MB</td>
              <td><%= (apiMemoryUsage.heapTotal / 1024 / 1024).toFixed(2) %> MB</td>
            <% } else { %>
              <td colspan="3">Unavailable</td>
            <% } %>
          </tr>
        </tbody>
      </table>
    </div>

    <div class="card">
      <h3>Quick Links</h3>
      <ul>
        <li><a href="/admin/config">View Configuration</a></li>
        <li><button id="healthCheckBtn" type="button">Health Check</button> <span id="healthCheckResult"></span></li>
      </ul>
    </div>
  </div>  
<%- include('../layouts/footer', { scripts }) %>
